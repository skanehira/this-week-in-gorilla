# 2023/05 2週目

## Rust
- [RustにおけるGitHub Actionsベストプラクティス](https://techblog.paild.co.jp/entry/2023/04/10/170218)
  - 以下のactionを使うのが良いらしい
    - https://github.com/dtolnay/rust-toolchain
    - https://github.com/Swatinem/rust-cache
    - https://github.com/giraffate/clippy-action
    - https://github.com/taiki-e/install-action
- [Javaエンジニアだった私が当時困ったRustのコンセプト](https://techblog.paild.co.jp/entry/2023/04/24/172723)
- [Rustの2種類の 'static](https://laysakura.github.io/2020/05/21/rust-static-lifetime-and-static-bounds/)
  - 'static ライフタイム境界の話
    - `fn f<T: 'static>(v: T) {}`のような書き方のことを指す
  - 'static ライフタイムは、参照を含まないデータか、'staticな参照を含むデータしか渡せない
  -  `fn f<T: 'a>(v: T) {}` の場合も同様で、`'a`以上のライフタイムを含むであれば渡せる

## RISC-V
- [RISC-VとChiselで学ぶ はじめてのCPU自作](https://gihyo.jp/book/2021/978-4-297-12305-5)
  - RISC-Vの実装まで解説している
  - テストスイートも通すっぽい（これが個人的に一番のポイント）
- https://github.com/bokuweb/r2
  - Rustで書かれた小さな RISC-V エミュレーター
  - NOMMU Linuxを動かせるレベル
  - ブラウザでも動かせる
- [RISC-V原典](https://bookplus.nikkei.com/atcl/catalog/18/269170/)
  - RISC-Vの設計思想と命令の解説書

## OS
- [KernelVM式 nommu Linux入門/introduce of nommu Linux for KernelVM](https://speakerdeck.com/tnishinaga/introduce-of-nommu-linux-for-kernelvm)
  - 一般的なOSは仮想メモリ制御ユニット(Memory Management Unit)が基本的に必要だけど、マイコンのCPUではMMUがないっぽい？
    - [wiki](https://ja.wikipedia.org/wiki/%E3%83%A1%E3%83%A2%E3%83%AA%E7%AE%A1%E7%90%86%E3%83%A6%E3%83%8B%E3%83%83%E3%83%88)を見るとCPUはMMUを通して物理メモリアドレスを取得している
    - ![](https://upload.wikimedia.org/wikipedia/commons/d/dc/MMU_principle_updated.png)
  - NOMMU Linuxを使うとマイコンでもLinuxを動かせる
    - ブートローダー + Linux カーネル + device tree blob + rootfs で動くらしい
      - ブートローダー
        - SDRAMの有効化
        - SDRAMへのカーネル読み込み
        - カーネル起動
      - カーネル
        - 各種ペリフェラルの初期化
        - OSの基本機能の初期化
        - rootfsのマウント
        - init処理の実行
      - rootfs
        - busyboxなどの実行バイナリの提供
  - NOMMU Linuxの一種？でuClinuxというのがある
    - https://ja.wikipedia.org/wiki/%CE%9CClinux
    - https://interface.cqpub.co.jp/wp-content/uploads/interface/2012/03/if03_037.pdf
- [コンピュータ講座 応用編](https://jp.fujitsu.com/family/familyroom/syuppan/family/webs/serial-comp2/index.html)
  - CPUの基礎の講座
  - バスなどについての説明がある
- [ArmのCPUとは何か](https://www.aps-web.jp/academy/ca/234/)
  - ARM関連の連載
  - MMUの詳細な説明もある
- [はじめて学ぶデバイスドライバ開発。組み込みLinuxによるハードウェア制御の仕組みを学ぶ](https://www.aps-web.jp/academy/23638/)
  - デバイスドライバについて解説している
    > デバイスドライバは、制御対象のデバイスを適切にコントロールし、ハードウェアが提供する機能を運用。アプリケーションをはじめとする他のプログラムに対して、機能を実現するために不可欠なAPI内の実装を提供するソフトウェアです。
    ![](https://www.aps-web.jp/wp-data/wp-content/uploads/2020/11/acd-wrlinux-07-fig05.png)
- [Device Tree についてのまとめ](https://qiita.com/koara-local/items/ed99a7b96a0ca252fc4e)
  - デバイスツリーについて解説
    > ARM Linux 向けにで使用されているプロパティ情報を記述した設定ファイルのこと。
    > Device Treeの仕組み自体は1994年に標準化されたOpen Firmwareというものを元にしている。
    > デバイスのベースアドレスや、クロック、割り込み番号といった、ハードウェア固有のプロパティをカーネルから分離しデバイスドライバの再利用性を高めることが目的の機能らしい。
    > Device Tree Souce に記載したプロパティをデバイスドライバから読み込んで使用する。
  - 雑なまとめ
    - デバイスツリーはデバイスのプロパティ（デバイスノード名やレジスタマップなど）を定義したもの
    - カーネルはデバイスツリーがないと正しくデバイスを認識できないらしい
    - デバイスドライバはデバイスツリーの情報を使ってデバイスを操作するためのAPIを提供
    - アプリケーションはデバイスドライバが提供しているAPIを使ってデバイスを操作する

## その他
- [TCP/IPプロトコルスタック自作の資料](https://drive.google.com/drive/folders/1k2vymbC3vUk5CTJbay4LLEdZ9HemIpZe)
- [基本から理解するJWTとJWT認証の仕](https://developer.mamezou-tech.com/blogs/2022/12/08/jwt-auth/)
  - JWT(JSON Web Token)はHTTPヘッダーやクエリパラメータにJSONデータをうまく載せるための仕様
  - JWS(JSON Web Signature)は受け取ったJWTが本物（改善されていない）ものかどうかを確認する仕組み
    - 暗号鍵を使ってペイロード(JWT)を暗号化する
      ![](https://developer.mamezou-tech.com/img/blogs/2022/1208_jwt-sign.drawio.svg)
    - 暗号化されたペイロード(シグネチャ)を復号化して、JWTの中身が変わっていないことを確認することで改ざんされないことを検知できる
      ![](https://developer.mamezou-tech.com/img/blogs/2022/1208_jwt-verify.drawio.svg)
  - IDプロバイダーが提供している認証情報を持つJWSが正しいかどうかをプロバイダーに問い合わせて検証して問題ないなら、JWSにある認証情報を使ってあれこれする
    ![](https://developer.mamezou-tech.com/img/blogs/2022/1208_jwt-auth.drawio.svg)
